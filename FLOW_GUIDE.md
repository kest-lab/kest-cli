# Kest Flow (.flow.md) ä½¿ç”¨æŒ‡å— ğŸŒŠ

Kest Flow æ˜¯ Kest CLI çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œæ—¨åœ¨é€šè¿‡ Markdown æ–‡æ¡£æ¥å®ç°â€œæ–‡æ¡£å³æµ‹è¯•â€ã€‚æ¯ä¸€ä¸ª `.flow.md` æ–‡ä»¶ä»£è¡¨ä¸€ä¸ªå®Œæ•´çš„**æµ‹è¯•é“¾è·¯åœºæ™¯**ã€‚

## ğŸŒŸ æ ¸å¿ƒç†å¿µ

- **é“¾è·¯å¼æµ‹è¯•**ï¼šå°†å¤šä¸ªç›¸å…³çš„ API è°ƒç”¨ä¸²è”èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„ä¸šåŠ¡æµï¼ˆå¦‚ï¼šæ³¨å†Œ -> ç™»å½• -> åˆ›å»ºé¡¹ç›® -> æŸ¥è¯¢è¯¦æƒ…ï¼‰ã€‚
- **å˜é‡ä¼ é€’**ï¼šè‡ªåŠ¨ä»ä¸Šä¸€ä¸ªæ¥å£çš„å“åº”ä¸­æå–æ•°æ®ï¼ˆå¦‚ Tokenã€IDï¼‰ï¼Œå¹¶ä¼ é€’ç»™åç»­æ¥å£ã€‚
- **æ–‡æ¡£å³æµ‹è¯•**ï¼šä½ çš„ API æ–‡æ¡£æœ¬èº«å°±æ˜¯å¯ä»¥ä¸€é”®æ‰§è¡Œçš„æµ‹è¯•ç”¨ä¾‹ã€‚

---

## ğŸ“ ç¼–å†™ Flow æ–‡ä»¶

åˆ›å»ºä¸€ä¸ªåç¼€ä¸º `.flow.md` çš„æ–‡ä»¶ï¼Œä½¿ç”¨ ` ```kest ` ä»£ç å—å®šä¹‰æ¯ä¸€ä¸ªæ­¥éª¤ã€‚

### è¯­æ³•è§„èŒƒ

```kest
# 1. ç¬¬ä¸€è¡Œï¼šMETHOD URL
POST /api/v1/auth/login

# 2. è¯·æ±‚å¤´ (å¯é€‰)
Content-Type: application/json

# 3. è¯·æ±‚ä½“ (ä¸ Header ä¹‹é—´ä¿ç•™ä¸€ä¸ªç©ºè¡Œ)
{
  "username": "admin",
  "password": "password123"
}

# 4. å˜é‡æ•è· (æ ¸å¿ƒåŠŸèƒ½)
[Captures]
token: data.access_token
user_id: data.user.id

# 5. é€»è¾‘æ–­è¨€
[Asserts]
status == 200
body.data.access_token exists
duration < 500ms
```

---

## ğŸ”— å˜é‡ä¸ Token ä¼ é€’

åœ¨åç»­æ­¥éª¤ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ `{{variable_name}}` è¯­æ³•å¼•ç”¨ä¹‹å‰æ•è·çš„å˜é‡ã€‚

```kest
GET /api/v1/projects
Authorization: Bearer {{token}}

[Asserts]
status == 200
```

---

## ğŸš€ æ‰§è¡Œå‘½ä»¤

ä½ å¯ä»¥é€šè¿‡ä¸€ä¸ªç®€å•çš„å‘½ä»¤æ‰§è¡Œæ•´ä¸ªæµ‹è¯•é“¾è·¯ï¼š

```bash
# æ‰§è¡Œå•ä¸ªæµç¨‹
kest run user_auth.flow.md

# å¹¶è¡Œæ‰§è¡Œï¼ˆå¦‚æœä½ æœ‰å¤šä¸ª flowï¼‰
kest run tests/ --parallel --jobs 4
```

---

## ğŸ›  è¿›é˜¶æŠ€å·§

1. **ç¯å¢ƒåˆ‡æ¢**ï¼šé…åˆ `kest env` ä½¿ç”¨ï¼Œå¯ä»¥æ— ç¼åœ¨å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒè¿è¡ŒåŒä¸€ä¸ª flowã€‚
2. **å¤šè¡Œ JSON**ï¼šMarkdown ä»£ç å—å®Œç¾æ”¯æŒå¤šè¡Œæ ¼å¼åŒ– JSONï¼Œæ¯”å‘½ä»¤è¡Œæ›´æ˜“è¯»ã€‚
3. **æ³¨é‡Šè¯´æ˜**ï¼šåœ¨ä»£ç å—ä¹‹å¤–ï¼Œä½ å¯ä»¥ç¼–å†™è¯¦ç»†çš„ Markdown æ–‡æ¡£è¯´æ˜ï¼ŒKest æ‰§è¡Œæ—¶ä¼šè‡ªåŠ¨å¿½ç•¥éä»£ç å—å†…å®¹ã€‚

---

**Keep Every Step Tested. ğŸ¦…**
